function createTable(){itemsTable=$("#itemsTable").DataTable({serverSide:!0,searchDelay:500,lengthMenu:[10,15,20],ajax:{url:"/api/product/items",data:{asin:productVM.product.asin}},columns:[{data:"sku"},{data:"alias"},{data:"color",orderable:!1},{data:"size",orderable:!1},{data:"invQty",width:50,orderable:!1},{width:120,orderable:!1,render:function(n,t,i){return'<button class="editBtn btn btn-sm btn-primary mr-2" type="button" data-toggle="modal" data-target="#itemModal"  data-id="'+i.sku+'">Edit<\/a><button class="delBtn btn btn-sm btn-danger" type="button" onclick="DeleteItem(\''+i.sku+"')\">Delete<\/button>"}}],columnDefs:[{className:"text-center",targets:[-1]}],order:[[0,"DESC"]]})}function DeleteItem(n){bootbox.confirm("Delete product?",function(t){t&&$.ajax({url:"/api/product/item",data:{asin:productVM.product.asin,sku:n},type:"DELETE",success:function(n){$.isSuccess(n)?itemsTable.ajax.reload():bootbox.alert(n)}})})}var itemsTable,productVM,itemVM;Dropzone.autoDiscover=!1;productVM=new Vue({el:"#app",data:{isNew:!0,title:"New",product:{asin:asinPara}},methods:{loadData:function(){var n=this;n.isNew=$.isNW(n.product.asin);n.title=n.isNew?"New":"Edit";n.isNew||$.get("/api/admin/product/"+n.product.asin,function(t){t.imageUrl=$.isNW(t.imageUrl)?$.pic(null,100,100):$.pic(t.imageUrl);n.product=t})},save:function(){var n=this,t=n.isNew?"POST":"PUT";return $.ajax({url:"/api/admin/product",type:t,data:{Product:n.product},success:function(t){$.isSuccess(t)?bootbox.alert("Save successfully.",function(){window.location="/admin/product/Save/"+n.product.asin}):bootbox.alert(t)}}),!1}},beforeMount:function(){var n=this;n.loadData()}});itemVM=new Vue({el:"#itemModal",data:{isNew:!0,item:{sku:null,invQty:0}},methods:{loadData:function(){var n=this;n.isNew=$.isNW(n.item.sku);n.isNew?n.item={asin:productVM.product.asin,invQty:0}:$.get("/api/product/item",{asin:productVM.product.asin,sku:n.item.sku},function(t){n.item=t})},save:function(){var n=this,t=n.isNew?"POST":"PUT";return $.ajax({url:"/api/product/item",type:t,data:{ProductItem:n.item},success:function(n){$.isSuccess(n)?($("#itemModal").modal("toggle"),itemsTable.ajax.reload()):bootbox.alert(n)}}),!1}}});$(function(){$("#items-tab").on("shown.bs.tab",function(){$.isNW(itemsTable)&&createTable()});$("#itemModal").on("show.bs.modal",function(n){var t=$(n.relatedTarget);itemVM.item.sku=t.data("id");itemVM.loadData()});$("#itemModal").on("click","#itemSaveBtn",function(){var n=$(this);itemVM.save()});$("#mydropzone").dropzone({parallelUploads:1,maxFilesize:1,autoProcessQueue:!1,addRemoveLinks:!0,dictDefaultMessage:'<span class="text-center"><span class="font-lg visible-xs-block visible-sm-block visible-lg-block"><span class="font-lg">Drop files to upload<\/span> <span>&nbsp&nbsp<h4 class="display-inline"> (Or Click)<\/h4><\/span>',dictResponseError:"Error uploading file!",acceptedFiles:"image/*",init:function(){var n=this;$("#uploadBtn").on("click",function(t){t.preventDefault();t.stopPropagation();n.getQueuedFiles().length>0?n.processQueue():bootbox.alert("Please add files to upload.")});n.on("removedfile",function(){n.files.length<=0&&$("#uploadBtn").attr("disabled",!0)});n.on("addedfile",function(){n.files.length>0&&$("#uploadBtn").attr("disabled",!1);$.isNW(n.files[1])||n.removeFile(n.files[0])});n.on("sending",function(n,t,i){i.append("PostData[ASIN]",productVM.product.asin)});n.on("success",function(t,i){i.isSuccess?productVM.product.imageUrl=i.result.imageUrl:bootbox.alert(respones.msgCode);$("#uploadModal").modal("toggle");n.removeAllFiles()})}})});