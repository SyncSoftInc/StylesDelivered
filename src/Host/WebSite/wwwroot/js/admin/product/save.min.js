var saveVM=new Vue({el:"#app",data:{isNew:!0,itemNo:"",title:"New",productItem:{invQty:0}},methods:{loadData:function(){var n=this;n.isNew=n.itemNo=="";n.title=n.isNew?"Edit":"New";n.itemNo!=""&&$.get("/api/product/item/"+n.itemNo,function(t){t.imageUrl=$.pic(t.imageUrl);n.productItem=t})},save:function(){var n=this,t=n.itemNo!=""?"PUT":"POST";return $.ajax({url:"/api/product/item",type:t,data:{ProductItem:n.productItem},success:function(t){$.isSuccess(t)?(n.itemNo=n.productItem.itemNo,bootbox.alert("Save successfully.",function(){window.location="/admin/product/Save/"+n.itemNo})):bootbox.alert(t)}}),!1}},beforeMount:function(){var n=this,t=window.location.href,i=t.substring(t.lastIndexOf("/")+1);i!="Save"&&(n.itemNo=i);n.loadData()}});Dropzone.autoDiscover=!1;$("#mydropzone").dropzone({parallelUploads:1,maxFilesize:1,autoProcessQueue:!1,addRemoveLinks:!0,dictDefaultMessage:'<span class="text-center"><span class="font-lg visible-xs-block visible-sm-block visible-lg-block"><span class="font-lg">Drop files to upload<\/span> <span>&nbsp&nbsp<h4 class="display-inline"> (Or Click)<\/h4><\/span>',dictResponseError:"Error uploading file!",acceptedFiles:"image/*",init:function(){var n=this;$("#uploadBtn").on("click",function(t){t.preventDefault();t.stopPropagation();n.getQueuedFiles().length>0?n.processQueue():bootbox.alert("Please add files to upload.")});n.on("removedfile",function(){n.files.length<=0&&$("#uploadBtn").attr("disabled",!0)});n.on("addedfile",function(){n.files.length>0&&$("#uploadBtn").attr("disabled",!1);n.files[1]!=null&&n.removeFile(n.files[0])});n.on("sending",function(n,t,i){i.append("PostData[ItemNo]",saveVM.productItem.itemNo)});n.on("success",function(t,i){i.isSuccess?saveVM.productItem.imageUrl=i.result.imageUrl:bootbox.alert(respones.msgCode);$("#uploadModal").modal("toggle");n.removeAllFiles()})}});