var homeVM=new Vue({el:"#app",data:{pageSize:9,pageIndex:1,totalPage:1,items:[]},methods:{loadData:function(){var n=this,t=(n.pageIndex-1)*n.pageSize;return $.get("/api/products?length="+n.pageSize+"&start="+t,function(t){n.totalPage=t.totalPage;$.each(t.data,function(n,t){t.imageUrl=$.pic(t.imageUrl)});n.items=n.items.concat(t.data)})},scroll:function(){var n=this;let t=!1;window.onscroll=()=>{let i=$.getScrollTop()+$.getWindowHeight()===$.getScrollHeight();i&&!t&&n.pageIndex<n.totalPage&&(t=!0,n.pageIndex++,n.loadData().done(function(){t=!1}))}}},beforeMount:function(){var n=this;n.loadData()},mounted:function(){var n=this;n.scroll()}}),applyVM=new Vue({el:"#addressModal",data:{asin:"",sku:"",addresses:[],states:[],address:{}},methods:{loadAddresses:function(){var n=this;$.get("/api/user/addresses",function(t){n.addresses=t})},loadStates:function(){var n=this;$.get("/api/states/us",function(t){n.states=t})},select:function(n){var t=this;t.address=n},apply:function(){var n=this,t={items:[{asin:n.asin,sku:n.sku}],shipping_Address1:n.address.address1,shipping_Address2:n.address.address2,shipping_City:n.address.city,shipping_State:n.address.state,shipping_ZipCode:n.address.zipCode};$.ajax({url:"/api/order",type:"PUT",data:{Order:t},success:function(n){$.isSuccess(n)?bootbox.alert("Success"):bootbox.alert(n)}})}},beforeMount:function(){var n=this;n.loadStates();n.loadAddresses()}}),ClearAddress=function(){applyVM.address={state:""}};$(function(){$("#addressModal").on("show.bs.modal",function(){ClearAddress()});$("#clearBtn").on("click",function(){ClearAddress()})});